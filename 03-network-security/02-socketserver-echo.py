#!/usr/bin/env python
# ECHO server using SocketServer module, multithreaded

import SocketServer

class EchoHandler(SocketServer.BaseRequestHandler):
	def handle(self):
		print "Got connection from: ", self.client_address
		data = "dummy"

		while len(data):
			data = self.request.recv(2048)
			print data
			self.request.send(data)

		print "Client left"

class ThreadedTCPServer(SocketServer.ThreadingMixIn, SocketServer.TCPServer):
	pass

serverAddr = ("0.0.0.0", 9000)

ThreadedTCPServer.allow_reuse_address = True
server = ThreadedTCPServer(serverAddr, EchoHandler)

server.serve_forever()
